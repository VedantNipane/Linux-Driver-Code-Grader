# Linux-Driver-Code-Grader

The system compiles, analyzes, and scores driver code (e.g., generated by LLMs) on multiple dimensions like correctness, security, code quality, performance, and advanced features.

---

##  Features
- **Compilation Check** (via GCC or Kernel kbuild if available)
- **Static Analysis** of code structure and driver type
- **Security Checks** (unsafe functions, memory/resource/race/input validation)
- **Style & Documentation Analysis** (using `checkpatch.pl` + heuristics)
- **Performance Heuristics** (complexity, memory usage, scalability)
- **Scoring System** (weighted: Correctness 40%, Security 25%, Quality 20%, Performance 10%, Advanced 5%)
- **Detailed Reports** (console + JSON outputs)
- **Results Logging** (CSV logs with timestamp & score breakdown)

---

## ðŸ“‚ Project Structure

```

Linux-Driver-Code-Grader/
â”œâ”€â”€ Evaluator/                # Main evaluation engine
â”‚   â”œâ”€â”€ evaluator.py          # Entry point (orchestrates evaluation)
â”‚   â”œâ”€â”€ compile\_checker.py    # Compilation tests (GCC & optional kbuild)
â”‚   â”œâ”€â”€ parser.py             # Driver type detection & structure analysis
â”‚   â”œâ”€â”€ style\_checker.py      # Style, documentation & maintainability
â”‚   â”œâ”€â”€ security\_checker.py   # Security & safety checks
â”‚   â”œâ”€â”€ performance\_checker.py# Performance heuristics
â”‚   â”œâ”€â”€ scoring.py            # Weighted scoring logic
â”‚   â”œâ”€â”€ reporter.py           # Console + JSON reporting
â”‚   â”œâ”€â”€ logger.py             # Logs scores into `score_logs.csv`
â”‚   â””â”€â”€ checkpatch.pl         # Kernel style checker (from Linux source)
â”‚
â”œâ”€â”€ Tests/                    # Sample/test driver files
â”‚   â”œâ”€â”€ sample\_driver.c
â”‚   â”œâ”€â”€ sample\_driver\_strong.c
â”‚   â”œâ”€â”€ sample\_driver\_bad\_security.c
â”‚   â””â”€â”€ good\_driver.c
â”‚
â”œâ”€â”€ outputs/                  # JSON reports generated per evaluation
â”œâ”€â”€ score\_logs.csv            # CSV log of all runs with full breakdown
â””â”€â”€ README.md                 # You are here

````

---

## Installation & Requirements

### Prerequisites
- Python **3.9+**
- `gcc` (for compilation checks)
- Optional: Linux kernel headers (`/lib/modules/$(uname -r)/build`) if you want **kbuild**-based compilation


* Linux kernel `checkpatch.pl` script copied into root directory

### Setup

Clone the repo:

```bash
git clone https://github.com/VedantNipane/Linux-Driver-Code-Grader.git
cd Linux-Driver-Code-Grader/Evaluator
```

##  Usage

### Evaluate a Driver

```bash
python evaluator.py ../Tests/sample_driver.c
```

### Example Output

```
=== Evaluation Report ===
File: Tests/sample_driver.c
Compilation: Success (Soft pass: missing kernel headers only)
Warnings: 0 Errors: 1 (method=gcc)

--- Score Breakdown ---
Correctness: 34.0/40
Security: 18.8/25
Code Quality: 16.7/20
Performance: 8.0/10
Advanced: 0.0/5

--- Security Breakdown ---
Memory Safety: 0.80
Resource Mgmt: 1.00
Race Conditions: 0.70
Input Validation: 0.60

--- Style ---
Violations: 44
Style Score: 0.52
Documentation Score: 0.50
Maintainability Score: 1.00

Overall Score: 77.5/100
Report saved to: outputs/sample_driver_results.json
```

### Logs

Each run also appends to `score_logs.csv`:

```csv
timestamp,file,overall_score,Correctness,Security,Code Quality,Performance,Advanced
2025-09-18 17:42:03,sample_driver.c,77.5/100,34.0/40,18.8/25,16.7/20,8.0/10,0.0/5
```

---

## ðŸ“Š Scoring Framework

| Category         | Weight | Sub-metrics                                                     |
| ---------------- | ------ | --------------------------------------------------------------- |
| **Correctness**  | 40%    | Compilation, required functions, kernel integration             |
| **Security**     | 25%    | Memory safety, resource mgmt, race conditions, input validation |
| **Code Quality** | 20%    | Style compliance, documentation, maintainability                |
| **Performance**  | 10%    | Complexity, memory usage, scalability                           |
| **Advanced**     | 5%     | Device tree support, power mgmt, debugging helpers              |

---

## ðŸ”§ Extending

* Add new checks in dedicated modules (`*_checker.py`)
* Adjust weights or scoring rules in `scoring.py`
* Add more test drivers in `Tests/` for benchmarking LLM outputs

---

## ðŸ“š References

* [Linux Kernel Coding Style](https://www.kernel.org/doc/html/latest/process/coding-style.html)
* *Linux Device Drivers, 3rd Edition* (Oâ€™Reilly)
* `checkpatch.pl` (from Linux source tree)

---


## Authors
Maintainer: [Vedant Nipane](https://github.com/VedantNipane)
